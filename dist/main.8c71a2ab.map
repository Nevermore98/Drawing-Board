{"version":3,"sources":["main.js"],"names":["tools","document","getElementsByClassName","range","getElementById","clear","undo","save","window","onbeforeunload","historyData","selectTool","onchange","lineWidth","value","onclick","ctx","clearRect","canvas","width","height","setCanvasBg","length","top","putImageData","pop","imgUrl","toDataURL","saveA","createElement","body","appendChild","href","download","Date","getTime","target","click","i","onmousedown","classList","remove","add","saveData","data","shift","push"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,QAAQC,SAASC,sBAAT,CAAgC,MAAhC,CAAd;AACA,IAAMC,QAAQF,SAASG,cAAT,CAAwB,OAAxB,CAAd;;AAEA,IAAMC,QAAQJ,SAASG,cAAT,CAAwB,OAAxB,CAAd;AACA,IAAME,OAAOL,SAASG,cAAT,CAAwB,MAAxB,CAAb;AACA,IAAMG,OAAON,SAASG,cAAT,CAAwB,MAAxB,CAAb;;AAEAI,OAAOC,cAAP,GAAwB;AAAA,SAAM,cAAN;AAAA,CAAxB;;AAEA,IAAIC,cAAc,EAAlB;;AAEAC;;AAEAR,MAAMS,QAAN,GAAiB,YAAY;AAC3BC,cAAY,KAAKC,KAAjB;AACD,CAFD;;AAIAT,MAAMU,OAAN,GAAgB,YAAY;AAC1BC,MAAIC,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBC,OAAOC,KAA3B,EAAkCD,OAAOE,MAAzC;AACAC,cAAY,OAAZ;AACD,CAHD;;AAKAf,KAAKS,OAAL,GAAe,YAAM;AACnB,MAAIL,YAAYY,MAAZ,GAAqB,CAAzB,EAA4B;AAC5BC,QAAMb,YAAYA,YAAYY,MAAZ,GAAqB,CAAjC,CAAN;AACAN,MAAIQ,YAAJ,CAAiBd,YAAYA,YAAYY,MAAZ,GAAqB,CAAjC,CAAjB,EAAsD,CAAtD,EAAyD,CAAzD;AACAZ,cAAYe,GAAZ;AACD,CALD;;AAOAlB,KAAKQ,OAAL,GAAe,YAAY;AACzB,MAAIW,SAASR,OAAOS,SAAP,CAAiB,WAAjB,CAAb;AACA,MAAIC,QAAQ3B,SAAS4B,aAAT,CAAuB,GAAvB,CAAZ;AACA5B,WAAS6B,IAAT,CAAcC,WAAd,CAA0BH,KAA1B;AACAA,QAAMI,IAAN,GAAaN,MAAb;AACAE,QAAMK,QAAN,GAAiB,QAAS,IAAIC,IAAJ,EAAD,CAAWC,OAAX,EAAzB;AACAP,QAAMQ,MAAN,GAAe,QAAf;AACAR,QAAMS,KAAN;AACD,CARD;;AAUA,SAAS1B,UAAT,GAAsB;AACpB,OAAK,IAAI2B,IAAI,CAAb,EAAgBA,IAAItC,MAAMsB,MAA1B,EAAkCgB,GAAlC,EAAuC;AACrCtC,UAAMsC,CAAN,EAASC,WAAT,GAAuB,YAAY;AACjC,WAAK,IAAID,KAAI,CAAb,EAAgBA,KAAItC,MAAMsB,MAA1B,EAAkCgB,IAAlC,EAAuC;AACrCtC,cAAMsC,EAAN,EAASE,SAAT,CAAmBC,MAAnB,CAA0B,QAA1B;AACA,aAAKD,SAAL,CAAeE,GAAf,CAAmB,QAAnB;AACD;AACF,KALD;AAMD;AACF;;AAED,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;AACtB;AACClC,cAAYY,MAAZ,KAAuB,EAAxB,IAAgCZ,YAAYmC,KAAZ,EAAhC;AACAnC,cAAYoC,IAAZ,CAAiBF,IAAjB;AACD","file":"main.8c71a2ab.map","sourceRoot":"../src","sourcesContent":["const tools = document.getElementsByClassName('tool')\nconst range = document.getElementById('range')\n\nconst clear = document.getElementById('clear')\nconst undo = document.getElementById('undo')\nconst save = document.getElementById('save')\n\nwindow.onbeforeunload = () => 'Reload site?'\n\nlet historyData = []\n\nselectTool()\n\nrange.onchange = function () {\n  lineWidth = this.value\n}\n\nclear.onclick = function () {\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n  setCanvasBg('white')\n}\n\nundo.onclick = () => {\n  if (historyData.length < 1) return\n  top = historyData[historyData.length - 1]\n  ctx.putImageData(historyData[historyData.length - 1], 0, 0)\n  historyData.pop()\n}\n\nsave.onclick = function () {\n  let imgUrl = canvas.toDataURL('image/png')\n  let saveA = document.createElement('a')\n  document.body.appendChild(saveA)\n  saveA.href = imgUrl\n  saveA.download = 'pic' + (new Date).getTime()\n  saveA.target = '_blank'\n  saveA.click()\n}\n\nfunction selectTool() {\n  for (let i = 0; i < tools.length; i++) {\n    tools[i].onmousedown = function () {\n      for (let i = 0; i < tools.length; i++) {\n        tools[i].classList.remove('active')\n        this.classList.add('active')\n      }\n    }\n  }\n}\n\nfunction saveData(data) {\n  // 撤销次数上限 10\n  (historyData.length === 10) && (historyData.shift())\n  historyData.push(data)\n}\n"]}